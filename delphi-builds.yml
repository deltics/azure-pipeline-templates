parameters:
  versions: []
  project: ''
  appType: 'CONSOLE'
  platform: ''
  searchPath: ''
  unitScopes: 'System;System.Win;Vcl;WinApi'
  fixPack: 'true'
  verbose: 'false'
  preBuild: []
  preBuildInline: []
  postBuild: []
  postBuildInline: []

steps:
- ${{ if containsValue( parameters.versions, '7' ) }}
  template: delphi-build.yml
  parameters:
    delphiVersion: 7
    project: ${{ parameters.project }}
    appType: ${{ parameters.appType }}
    platform: ${{ parameters.platform }}
    searchPath: ${{ parameters.searchPath }}
    unitScopes: ${{ parameters.unitScopes }}
    fixPack: ${{ parameters.fixPack }}
    verbose: ${{ parameters.verbose }}
    preBuild: ${{ parameters.preBuild }}
    preBuildInline: ${{ parameters.preBuildInline }}
    postBuildInline: ${{ parameters.postBuildInline }}
    postBuild: ${{ parameters.postBuild }}

- ${{ if containsValue( parameters.versions, 'xe4' ) }}
  template: delphi-build.yml
  parameters:
    delphiVersion: xe4
    project: ${{ parameters.project }}
    appType: ${{ parameters.appType }}
    platform: ${{ parameters.platform }}
    searchPath: ${{ parameters.searchPath }}
    unitScopes: ${{ parameters.unitScopes }}
    fixPack: ${{ parameters.fixPack }}
    verbose: ${{ parameters.verbose }}
    preBuild: ${{ parameters.preBuild }}
    preBuildInline: ${{ parameters.preBuildInline }}
    postBuildInline: ${{ parameters.postBuildInline }}
    postBuild: ${{ parameters.postBuild }}

- ${{ if containsValue( parameters.versions, '10.3' ) }}
  template: delphi-build.yml
  parameters:
    delphiVersion: 10.3
    project: ${{ parameters.project }}
    appType: ${{ parameters.appType }}
    platform: ${{ parameters.platform }}
    searchPath: ${{ parameters.searchPath }}
    unitScopes: ${{ parameters.unitScopes }}
    fixPack: ${{ parameters.fixPack }}
    verbose: ${{ parameters.verbose }}
    preBuild: ${{ parameters.preBuild }}
    preBuildInline: ${{ parameters.preBuildInline }}
    postBuildInline: ${{ parameters.postBuildInline }}
    postBuild: ${{ parameters.postBuild }}
